@import '~@angular/material/theming';

// Remove border radius from angular material
@if ($xm-enable-rounded == false) {
  $mat-autocomplete-panel-border-radius:     0;
  $mat-button-toggle-standard-border-radius: 0;
  $mat-button-toggle-legacy-border-radius:   0;
  $mat-card-border-radius:                   0;
  $mat-dialog-border-radius:                 0;
  $mat-form-field-fill-border-radius:        0;
  $mat-form-field-outline-border-radius:     0;
  $mat-menu-border-radius:                   0;
  $mat-slide-toggle-bar-border-radius:       0;

  // Override mat-select-panel
  div.mat-select-panel {
    border-radius: 0;
  }
}

@include mat-core();

@mixin xm-angular-material-theme($theme) {
  $primary:        map-get($theme, primary-palette);
  $secondary:      map-get($theme, secondary-palette);
  $warn:           map-get($theme, warn-palette);

  // @todo: pass $default, $light and $dark
  $xm-mat-primary: mat-palette($primary);
  $xm-mat-accent:  mat-palette($secondary);
  $xm-mat-warn:    mat-palette($warn);

  $xm-mat-theme:   mat-light-theme($xm-mat-primary, $xm-mat-accent, $xm-mat-warn);

  @include angular-material-theme($xm-mat-theme);
}

@mixin angular-material-xm-override() {
  /**
   * Backward compatibility: full width for all input inside of .form-group.
   * @todo: research
   */
  .form-group > mat-form-field {
    width: 100%;
  }

  /**
   * Backward compatibility: the icons shouldn't be overridden like this
   * @todo: resolve cases locally
   */
  a .material-icons {
    vertical-align: middle;
  }

  /**
   * Bootstrap conflict: bootstrap _reboot.scss assign button:focus
   * @todo: remove bootstrap
   */
  .mat-button:focus,
  .mat-button-base:focus {
    outline: 0;
    box-shadow: none;
  }
}
